<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Hello</title>
</head>

<body></body>
<script>
  // Ambil parameter access token redirect yang telah kirimkan melalui handler
  const query = window.location.search.substring(1);
  const token = query.split("access_token=")[1];

  // Call user info pai menggunakan access token
  fetch("https://api.github.com/user", {
    headers: {
      Accept: "application/vnd.github.v3+json",
      Authorization: "token " + token,
    },
  })
          .then((res) => res.json())
          .then((res) => {
            // Documented here: https://developer.github.com/v3/users/#get-the-authenticated-user
            const nameNode = document.createTextNode(`Welcome, ${res.login}`);
            document.body.appendChild(nameNode);
          });
</script>
</html>